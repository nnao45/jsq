#!/usr/bin/expect -f

set timeout 10

# ファイルからデータを読み込んでREPLを起動
spawn node dist/index.js --file test-data.json --verbose

# REPLプロンプトを待つ
expect ">"

# 式を入力
send "$.test\r"

# 結果を確認
expect {
    "hello" {
        puts "\n✓ Result displayed: hello"
    }
    timeout {
        puts "\n✗ No result displayed"
    }
}

# 数式も試す
send "10 + 5\r"

expect {
    "15" {
        puts "✓ Math result displayed: 15"
    }
    timeout {
        puts "✗ Math result not displayed"
    }
}

# 終了
send "\x03"
expect eof