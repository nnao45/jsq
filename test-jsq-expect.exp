#!/usr/bin/expect -f

# Set timeout
set timeout 5

# Start JSQ with piped data
spawn sh -c {echo '{"name": "test", "value": 42}' | bun dist/index-bun.js}

# Wait for the REPL prompt
expect "> "

# Send first command
send "$.name\r"
expect "> "

# Send second command
send "$.value * 2\r"
expect "> "

# Exit
send ".exit\r"
expect eof